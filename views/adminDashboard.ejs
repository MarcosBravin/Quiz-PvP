<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %></title>
    <link rel="stylesheet" href="/admin.css">
</head>
<body>
    <header>
        <nav class="navbar">
            <h1>Painel Administrativo</h1>
            <ul>
                <li><a href="/">üè† In√≠cio</a></li>
                <li><a href="/admin/dashboard">‚öôÔ∏è Admin</a></li>
                <li><a href="/logout" class="logout">üö™ Sair</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <h2>Lista de Usu√°rios</h2>
        
        <!-- Mensagens de Feedback -->
        <% if (message) { %>
            <p class="message"><%= message %></p>
        <% } %>

        <table>
            <thead>
                <tr>
                    <th>Nome</th>
                    <th>Email</th>
                    <th>Pontua√ß√£o</th>
                    <th>Status</th>
                    <th>Cargo</th>
                    <th>A√ß√µes</th>
                </tr>
            </thead>
            <tbody>
                <% users.forEach(user => { %>
                    <tr>
                        <td><%= user.name %></td>
                        <td><%= user.email %></td>
                        <td><%= user.score %></td>
                        <td>
                            <% if (user.isBanned) { %>
                                <span class="banned">üö´ Banido</span>
                            <% } else { %>
                                <span class="active">üü¢ Ativo</span>
                            <% } %>
                        </td>
                        <td>
                            <% if (user.role === "admin") { %>
                                üëë Administrador
                            <% } else if (user.role === "moderator") { %>
                                üîß Moderador
                            <% } else { %>
                                üë§ Usu√°rio
                            <% } %>
                        </td>
                        <td class="actions">
                            <!-- Bot√£o de Banir/Desbanir -->
                            <form action="/admin/<%= user.isBanned ? 'unban' : 'ban' %>/<%= user._id %>" method="POST">
                                <button type="submit" class="<%= user.isBanned ? 'unban' : 'ban' %>">
                                    <%= user.isBanned ? 'üîì Desbanir' : 'üö´ Banir' %>
                                </button>
                            </form>

                            <!-- Bot√£o de Promo√ß√£o (se n√£o for admin) -->
                            <% if (user.role !== "admin") { %>
                                <form action="/admin/promote/<%= user._id %>" method="POST">
                                    <button type="submit" class="promote">üîù Promover</button>
                                </form>
                            <% } %>

                            <!-- Bot√£o de Rebaixamento (se n√£o for user) -->
                            <% if (user.role !== "user") { %>
                                <form action="/admin/demote/<%= user._id %>" method="POST">
                                    <button type="submit" class="demote">üîΩ Rebaixar</button>
                                </form>
                            <% } %>
                        </td>
                    </tr>
                <% }) %>
            </tbody>
        </table>
    </main>

    <footer>
        <p>&copy; 2025 Quiz PvP - Todos os direitos reservados</p>
    </footer>
</body>
</html>
